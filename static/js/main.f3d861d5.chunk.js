(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{333:function(e,t,a){},354:function(e,t,a){e.exports=a(891)},750:function(e,t,a){},751:function(e,t,a){},752:function(e,t,a){},759:function(e,t,a){},816:function(e,t,a){},817:function(e,t,a){},860:function(e,t,a){},861:function(e,t,a){},862:function(e,t,a){},863:function(e,t,a){},864:function(e,t,a){},865:function(e,t,a){},866:function(e,t,a){},867:function(e,t,a){},868:function(e,t,a){},869:function(e,t,a){},870:function(e,t,a){},871:function(e,t,a){},881:function(e,t,a){},882:function(e,t,a){},883:function(e,t,a){},884:function(e,t,a){},885:function(e,t,a){},886:function(e,t,a){},887:function(e,t,a){},888:function(e,t,a){},889:function(e,t,a){},890:function(e,t,a){},891:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(34),c=a.n(s),o=a(188),i=a(334),l=a(128),u=a(17),m=a(68),d=a(81),p=a(338),f=a(13),h=a(179),g=a(339),E=a.n(g),_=a(340),b=a(341),v=a(8),N=a(55),S=a.n(N),y=S()({AIRPORT_HAS_ERRORED:null,AIRPORT_FETCH_DATA_SUCCESS:null,TICKETS_IS_LOADING:null,TICKETS_HAS_ERRORED:null,TICKETS_FETCH_DATA_SUCCESS:null,TICKETS_RETURN_FETCH_DATA_SUCCESS:null,TICKETS_INFO_RESETTING:null}),O={hasErrored:!1,isLoading:!1,departureItems:[],returnItems:[]};var T={items:[],hasErrored:!1};var I=Object(f.combineReducers)({tickets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.TICKETS_HAS_ERRORED:return Object(v.a)({},e,{hasErrored:t.hasErrored});case y.TICKETS_IS_LOADING:return Object(v.a)({},e,{isLoading:t.isLoading});case y.TICKETS_FETCH_DATA_SUCCESS:return Object(v.a)({},e,{departureItems:t.items});case y.TICKETS_RETURN_FETCH_DATA_SUCCESS:return Object(v.a)({},e,{returnItems:t.items});case y.TICKETS_INFO_RESETTING:return Object(v.a)({},O);default:return e}},airports:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.AIRPORT_FETCH_DATA_SUCCESS:return Object(v.a)({},e,{items:t.items});case y.AIRPORT_HAS_ERRORED:return Object(v.a)({},e,{hasErrored:t.hasErrored});default:return e}}}),R=S()({USER_REQUEST:null,USER_SELECTED_FLIGHT_INFO:null,USER_RETURN_SELECTED_FLIGHT_INFO:null,USER_TOTAL_PRICE:null,PASSENGERS_INFO:null,RETURN_FLIGHT_PASSENGERS_INFO:null,SELECTED_PASSENGER:null,RETURN_FLIGHT_SELECTED_PASSENGER:null,RETURN_SELECTED_FLIGHT_INFO_RESETTING:null,USER_INFO_RESETTING:null,SELECTED_FLIGHT_INFO_RESETTING:null,IS_LOGGED_IN_USER:null,IS_REGISTERED_USER:null,PAYMENT_STATUS:null,TWO_WAY_REQUEST:null}),k={id:"",passengersInfo:[],selectedPassenger:0};var F={id:"",passengersInfo:[],selectedPassenger:0};var j={request:{twoWayRequest:!1},loggedInUser:!1,paymentSuccess:!1};var C=S()({FETCHED_USER_ORDERS:null,FETCHED_USER_ORDERS_ERRORED:null,ORDERS_INFO_RESETTING:null}),w={ordersErrored:!1,orders:[]};var D=Object(f.combineReducers)({selectedFlight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.USER_SELECTED_FLIGHT_INFO:return Object(v.a)({},e,t.flightInfo);case R.PASSENGERS_INFO:return Object(v.a)({},e,{passengersInfo:t.info});case R.SELECTED_PASSENGER:return Object(v.a)({},e,{selectedPassenger:t.id});case R.SELECTED_FLIGHT_INFO_RESETTING:return Object(v.a)({},k);default:return e}},returnSelectedFlight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.USER_RETURN_SELECTED_FLIGHT_INFO:return Object(v.a)({},e,t.flightInfo);case R.RETURN_FLIGHT_PASSENGERS_INFO:return Object(v.a)({},e,{passengersInfo:t.info});case R.RETURN_FLIGHT_SELECTED_PASSENGER:return Object(v.a)({},e,{selectedPassenger:t.id});case R.RETURN_SELECTED_FLIGHT_INFO_RESETTING:return Object(v.a)({},F);default:return e}},requestInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.USER_REQUEST:return Object(v.a)({},e,{request:Object(v.a)({},t.request,{adult:+t.request.adult||0,child:+t.request.child||0,infant:+t.request.infant||0})});case R.IS_LOGGED_IN_USER:return Object(v.a)({},e,{loggedInUser:t.bool});case R.PAYMENT_STATUS:return Object(v.a)({},e,{paymentSuccess:t.bool});case R.USER_INFO_RESETTING:return Object(v.a)({},j,{loggedInUser:e.loggedInUser});default:return e}},ordersInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.FETCHED_USER_ORDERS:return Object(v.a)({},e,{orders:t.orders});case C.FETCHED_USER_ORDERS_ERRORED:return Object(v.a)({},e,{ordersErrored:t.bool});case C.ORDERS_INFO_RESETTING:return Object(v.a)({},w);default:return e}}}),P=S()({GET_LUGGAGE_TYPES:null,LUGGAGE_HAS_ERRORED:null}),A={luggageTypes:[],hasErrored:!1};var U=Object(f.combineReducers)({luggage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.GET_LUGGAGE_TYPES:return Object(v.a)({},e,{luggageTypes:t.luggageTypes});case P.LUGGAGE_HAS_ERRORED:return Object(v.a)({},e,{hasErrored:t.hasErrored});default:return e}}}),L=a(137),G={notifications:[]},x=Object(f.combineReducers)({searchPage:I,user:D,data:U,notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ENQUEUE_SNACKBAR":return Object(v.a)({},e,{notifications:[].concat(Object(L.a)(e.notifications),[Object(v.a)({},t.notification)])});case"REMOVE_SNACKBAR":return Object(v.a)({},e,{notifications:e.notifications.filter(function(e){return e.key!==t.key})});default:return e}}}),q={key:"root",storage:E.a},H=Object(h.a)(q,x),M=(a(750),a(751),a(18)),W=a(19),K=a(22),B=a(20),Y=a(21),V=a(103),Q=a(32),$=a(135),J=a.n($),z=a(82),X=a.n(z),Z=a(43),ee=a.n(Z),te=a(342),ae=a.n(te);a(752);function ne(e){var t=e.onClick;return r.a.createElement("button",{type:"button",className:"header__button",onClick:t},r.a.createElement(ae.a,null))}a(759);var re=function(e){var t=e.isOpen,a=e.onClick;return r.a.createElement("div",{role:"presentation",className:"overlay".concat(t?" overlay_opened":""),onClick:a})},se=function(e){var t=e.isOpen,a=e.hideSidebar,s=e.children;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"sidebar".concat(t?" sidebar_opened":"")},s),r.a.createElement(re,{isOpen:t,onClick:a}))},ce=a(48),oe=a.n(ce),ie=function(e){return{type:"ENQUEUE_SNACKBAR",notification:Object(v.a)({key:(new Date).getTime()+Math.random()},e)}},le={sendOrderData:"http://localhost:3001/order",sendLoginFormData:"http://localhost:3001/user/login",sendRegisterFormData:"http://localhost:3001/user/register",checkAuthentication:"http://localhost:3001/user/check-auth"};function ue(e){return{type:R.PAYMENT_STATUS,bool:e}}function me(e){return{type:R.IS_LOGGED_IN_USER,bool:e}}function de(e){var t=e.firstName?le.sendRegisterFormData:le.sendLoginFormData;return function(a){oe.a.post(t,e).then(function(t){var n,r,s;return a((n=!0,r=t.data.id,s=t.data.token,function(e){e(me(n)),localStorage.setItem("id",r),localStorage.setItem("token",s)})),e.firstName?a(ie({message:"Registration success",options:{variant:"success"}})):a(ie({message:"Authorization success",options:{variant:"success"}}))}).catch(function(){return a(me(!1))})}}function pe(){return{type:R.USER_INFO_RESETTING}}function fe(e){return{type:y.TICKETS_IS_LOADING,isLoading:e}}function he(e){return{type:y.TICKETS_FETCH_DATA_SUCCESS,items:e}}function ge(e){return{type:y.TICKETS_RETURN_FETCH_DATA_SUCCESS,items:e}}function Ee(e){var t=e.from,a=e.to,n=e.departure,r=e.return,s=e.wayType||[],c="http://localhost:3001/tickets?fromCountry=".concat(t,"&toCountry=").concat(a),o=s.length?"http://localhost:3001/tickets?fromCountry=".concat(a,"&toCountry=").concat(t):null,i=[{url:c,action:he,name:"departureItems",date:n},{url:o,action:ge,name:"returnItems",date:r}];return function(t){t(he([])),t(ge([])),t(fe(!0)),i.forEach(function(a){var n=a.url,r=a.action,c=a.name,i=a.date;n&&fetch(n).then(function(e){if(!e.ok)throw Error(e.statusText);return t(fe(!1)),e}).then(function(e){return e.json()}).then(function(a){var n=new Date(i),l=a.map(function(a){var r,c=a._id,i=a.code,l=a.price,u=a.planeInfo,m=a.fromCountry.name,d=a.toCountry.name,p=!!s.length,f=Object(v.a)({},e,{twoWayRequest:p,from:o?d:m,to:o?m:d});t((r=f,{type:R.USER_REQUEST,request:r}));var h=new Date(a.flightPeriod.startDate),g=new Date(a.flightPeriod.endDate);if(h<=n&&n<=g){var E=0===n.getDay()?7:n.getDay();if(a.schedule.some(function(e){return e.dayOfWeek===E})){var _=a.schedule.filter(function(e){return e.dayOfWeek===E});return{id:c,code:i,date:n,startTime:_[0].departureTime,endTime:_[0].arrivalTime,fromCountry:m,toCountry:d,price:l,planeInfo:u}}}});if(localStorage.setItem("".concat(c),JSON.stringify(l)),void 0!==l[0])return t(r(l));t(ie({message:"Can't find flights for this request",options:{variant:"error"}}))}).catch(function(){var e;t((e=!0,{type:y.TICKETS_HAS_ERRORED,hasErrored:e})),t(ie({message:"Ooops...Something goes wrong",options:{variant:"error"}}))})})}}function _e(){return{type:y.TICKETS_INFO_RESETTING}}var be=a(29),ve=a.n(be);function Ne(e){var t="http://localhost:3001/order?selectedFlight=".concat(e.id);return function(a){oe.a.get(t).then(function(e){if(200!==e.status)throw Error(e.statusText);return e.data}).then(function(t){return t.filter(function(t){var a=t.departureDate;return ve()(a).format("L")===ve()(e.date).format("L")})}).then(function(e){return e.map(function(e){return e.passengersInfo})}).then(function(e){var t=[];return e.map(function(e){return e.forEach(function(e){var a=e.selectedSeat;t.push(a)})}),t}).then(function(t){var n=Object(v.a)({},e,{soldSeats:t});a(function(e){return{type:R.USER_SELECTED_FLIGHT_INFO,flightInfo:e}}(n))}).catch(function(e){return console.log(e)})}}function Se(e){return{type:R.PASSENGERS_INFO,info:e}}function ye(){return{type:R.SELECTED_FLIGHT_INFO_RESETTING}}function Oe(e){var t="http://localhost:3001/order?selectedFlight=".concat(e.id);return function(a){oe.a.get(t).then(function(e){if(200!==e.status)throw Error(e.statusText);return e.data}).then(function(e){return e.map(function(e){return e.passengersInfo})}).then(function(e){var t=[];return e.map(function(e){return e.forEach(function(e){var a=e.selectedSeat;t.push(a)})}),t}).then(function(t){var n=Object(v.a)({},e,{soldSeats:t});a(function(e){return{type:R.USER_RETURN_SELECTED_FLIGHT_INFO,flightInfo:e}}(n))}).catch(function(e){return console.log(e)})}}function Te(e){return{type:R.RETURN_FLIGHT_PASSENGERS_INFO,info:e}}function Ie(){return{type:R.RETURN_SELECTED_FLIGHT_INFO_RESETTING}}function Re(e){return{type:C.FETCHED_USER_ORDERS_ERRORED,bool:e}}function ke(e,t){var a=localStorage.getItem("id");return function(n){oe.a.get("http://localhost:3001/order?user=".concat(a,"&date=").concat(e,"&type=").concat(t)).then(function(e){if(200!==e.status)throw Error(e.statusText);return e}).then(function(e){var t;if(n((t=e.data,{type:C.FETCHED_USER_ORDERS,orders:t})),n(Re(!1)),!e.data.length)return n(ie({message:"You haven't got any orders yet",options:{variant:"info"}}))}).catch(function(){return n(Re(!0))})}}function Fe(){return{type:C.ORDERS_INFO_RESETTING}}var je=a(175),Ce=a.n(je),we=a(83),De=a.n(we),Pe=a(189),Ae=a(33),Ue=function(e){function t(){var e,a;Object(M.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(K.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null},a.handleClick=function(e){return a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a}return Object(Y.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.state.anchorEl,t=localStorage.getItem("token");return r.a.createElement("div",{className:"login-menu"},r.a.createElement("button",{type:"button",className:"link-to login-menu__user-icon-button",onClick:this.handleClick},r.a.createElement(Ae.k,{className:"login-menu__user-icon"})),t?r.a.createElement(Ce.a,{id:"simple-menu",anchorEl:e,open:Boolean(e),onClose:this.handleClose},r.a.createElement(De.a,{onClick:this.handleClose},r.a.createElement(V.a,{to:"/search",className:"login-menu__link-to",onClick:this.props.logOut},"Logout"))):r.a.createElement(Ce.a,{id:"simple-menu",anchorEl:e,open:Boolean(e),onClose:this.handleClose},r.a.createElement(De.a,{onClick:this.handleClose},r.a.createElement(V.a,{to:"/login",className:"login-menu__link-to"},"Log In")),r.a.createElement(De.a,{onClick:this.handleClose},r.a.createElement(V.a,{to:"/register",className:"login-menu__link-to"},"Register"))))}}]),t}(r.a.Component),Le=Object(Pe.a)(Ue);a(816);var Ge=Object(u.b)(function(e){return{loggedInUser:e.user.requestInfo.loggedInUser}},function(e){return{logInUser:function(t){return e(me(t))},resetTicketsInfo:function(){return e(_e())},resetSelectedFlightInfo:function(){return e(ye())},resetReturnSelectedFlightInfo:function(){return e(Ie())},resetOrdersInfo:function(){return e(Fe())},resetUserInfo:function(){return e(pe())}}})(function(e){var t=function(){localStorage.clear(),e.resetTicketsInfo(),e.resetSelectedFlightInfo(),e.resetReturnSelectedFlightInfo(),e.resetOrdersInfo(),e.resetUserInfo(),e.logInUser(!1)};return r.a.createElement("div",{className:e.className},r.a.createElement(V.a,{to:"/search",className:"link-to",onClick:e.onClick},"Search"),e.onClick?e.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{to:"/orders-history",className:"link-to",onClick:e.onClick},"My orders"),r.a.createElement(V.a,{to:"/search",className:"link-to",onClick:t},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{to:"/login",className:"link-to",onClick:e.onClick},"Log In"),r.a.createElement(V.a,{to:"/register",className:"link-to",onClick:e.onClick},"Register")):e.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{to:"/orders-history",className:"link-to",onClick:e.onClick},"My orders"),r.a.createElement(Le,{logOut:t})):r.a.createElement(Le,{logOut:t}))});function xe(e){return r.a.createElement(n.Fragment,null,r.a.createElement(Ge,{className:"header__menu"}),r.a.createElement(ne,{onClick:e.showSidebar}),r.a.createElement(se,{isOpen:e.isOpen,hideSidebar:e.showSidebar},r.a.createElement(Ge,{className:"sidebar__menu",onClick:e.showSidebar})))}a(817);var qe=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(K.a)(this,Object(B.a)(t).call(this,e))).showSidebar=function(){a.setState(function(e){return{isOpen:!e.isOpen}})},a.state={isOpen:!1},a}return Object(Y.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:"header"},r.a.createElement(J.a,{position:"fixed"},r.a.createElement(X.a,null,r.a.createElement(ee.a,{variant:"h6",color:"inherit",className:e.grow},r.a.createElement(V.a,{to:"/search",className:"header__logo-link"},"Travello")),r.a.createElement(xe,{isOpen:this.state.isOpen,showSidebar:this.showSidebar}))))}}]),t}(n.Component),He=Object(Q.withStyles)({root:{flexGrow:1},grow:{flexGrow:1}})(qe),Me=a(336),We=a(134),Ke=a.n(We),Be={root:{flexGrow:1,zIndex:2,marginTop:56},container:{display:"flex",flexDirection:"column",alignItems:"flex-start"},icon:{marginLeft:13,marginRight:10},textField:{},selectField:{},passengers:{},button:{}},Ye=a(176),Ve=a.n(Ye),Qe=a(343),$e=a(84),Je=a(11),ze=a(61);function Xe(e){return function(t){fetch(e).then(function(e){if(!e.ok)throw Error(e.statusText);return e}).then(function(e){return e.json()}).then(function(e){return t((a=e,{type:y.AIRPORT_FETCH_DATA_SUCCESS,items:a}));var a}).catch(function(){return t((e=!0,{type:y.AIRPORT_HAS_ERRORED,hasErrored:e}));var e})}}var Ze=a(28),et=function(e){var t,a,n;return{textField:(t={marginBottom:e.spacing.unit,marginRight:10,width:200},Object(Ze.a)(t,e.breakpoints.up("sm"),{width:210}),Object(Ze.a)(t,e.breakpoints.up("md"),{width:240}),Object(Ze.a)(t,e.breakpoints.up("lg"),{width:270}),t),selectField:(a={marginBottom:e.spacing.unit,marginRight:10,width:200},Object(Ze.a)(a,e.breakpoints.up("sm"),{width:210}),Object(Ze.a)(a,e.breakpoints.up("md"),{width:240}),Object(Ze.a)(a,e.breakpoints.up("lg"),{width:270}),a),passengers:(n={marginBottom:e.spacing.unit,marginRight:10,width:200},Object(Ze.a)(n,e.breakpoints.up("sm"),{width:210}),Object(Ze.a)(n,e.breakpoints.up("md"),{width:240}),Object(Ze.a)(n,e.breakpoints.up("lg"),{width:270}),n),selectEmpty:{marginTop:2*e.spacing.unit},button:{marginTop:10}}},tt=function(e){var t={},a=ve()(e.departure).format("L"),n=void 0!==e.return?ve()(e.return).format("L"):null,r=ve()(new Date).format("L"),s=e.wayType||[];return e.from||(t.from="Required"),e.to?e.to===e.from&&(t.to="Please, choose another country"):t.to="Required",e.departure?a<r&&(t.departure="Please, choose another day"):t.departure="Required",s.length&&(e.return?n<=a&&(t.return="Please, choose another day"):t.return="Required"),e.adult&&"0"!==e.adult||e.child&&"0"!==e.child||e.infant&&"0"!==e.infant||(t.adult="Required",t.child=" ",t.infant=" "),t},at=a(58);function nt(e){var t=e.input,a=t.name,n=t.onChange,s=t.value,c=Object(at.a)(t,["name","onChange","value"]),o=e.meta,i=Object(at.a)(e,["input","meta"]),l=(o.submitError&&!o.dirtySinceLastSubmit||o.error)&&o.touched;return r.a.createElement(ze.a,Object.assign({},i,{name:a,helperText:l?o.error||o.submitError:void 0,error:l,inputProps:c,onChange:n,value:""===s?null:s}))}var rt=a(172),st=a.n(rt),ct=a(173),ot=a.n(ct),it=a(174),lt=a.n(it),ut=a(171),mt=a.n(ut),dt=a(170),pt=a.n(dt),ft=function(e){function t(){var e,a;Object(M.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(K.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).state={labelWidth:0},a}return Object(Y.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){this.setState({labelWidth:c.a.findDOMNode(this.InputLabelRef).offsetWidth})}},{key:"render",value:function(){var e=this,t=this.props,a=t.input,n=a.name,s=a.onChange,c=a.value,o=Object(at.a)(a,["name","onChange","value"]),i=t.meta,l=Object(at.a)(t,["input","meta"]);return r.a.createElement(st.a,{variant:"outlined",error:i.error&&i.touched},r.a.createElement(mt.a,{ref:function(t){e.InputLabelRef=t},htmlFor:"outlined-age-simple"},this.props.label),r.a.createElement(lt.a,Object.assign({},l,{name:n,inputProps:o,value:c,onChange:s,input:r.a.createElement(pt.a,{labelWidth:this.state.labelWidth,name:n,id:"outlined-age-simple"})}),this.props.items.length&&this.props.items.map(function(e){var t=e._id,a=e.name;return r.a.createElement(De.a,{key:Math.random(),value:t},a)})),i.touched&&i.error&&r.a.createElement(ot.a,{margin:"dense"},i.error))}}]),t}(r.a.Component),ht=a(136),gt=a.n(ht),Et=function(e){var t=e.input,a=t.name,n=t.onChange,s=t.value,c=Object(at.a)(t,["name","onChange","value"]),o=e.meta,i=Object(at.a)(e,["input","meta"]);return r.a.createElement(gt.a,Object.assign({},i,{name:a,helperText:o.touched?o.error:void 0,error:o.error&&o.touched,inputProps:c,onChange:n,value:s}))},_t=(a(860),function(e){function t(){var e,a;Object(M.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(K.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(){var e=Object(Qe.a)(Ve.a.mark(function e(t){return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.props.ticketsFetchData(t),a.props.onSearchClick();case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(Y.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){return this.props.airports.length||this.props.airportsFetchData("http://localhost:3001/airports")}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Je.b,{onSubmit:this.onSubmit,validate:tt,render:function(a){var n=a.handleSubmit;return r.a.createElement("form",{className:"flights-list__search-form ".concat(e.props.state?"":"closed"),onSubmit:n},r.a.createElement(Je.a,{name:"from",label:"From",className:t.selectField,component:ft,items:e.props.airports}),r.a.createElement(Je.a,{name:"to",label:"To",className:t.selectField,component:ft,items:e.props.airports}),r.a.createElement(ze.b,{utils:$e.a},r.a.createElement(Je.a,{name:"departure",label:"Departure",className:t.textField,component:nt,variant:"outlined"})),r.a.createElement(ze.b,{utils:$e.a},r.a.createElement(Je.a,{name:"return",label:"Return",className:t.textField,component:nt,variant:"outlined"})),r.a.createElement(Je.a,{name:"adult",label:"Passengers",className:t.passengers,component:Et,variant:"outlined"}),r.a.createElement("button",{type:"submit",className:"button"},"Search"))}}),r.a.createElement(re,{isOpen:this.props.state}))}}]),t}(r.a.Component)),bt=Object(f.compose)(Me.a,Object(Q.withStyles)(et),Object(u.b)(function(e){return{userRequest:e.user.request,tickets:e.searchPage.tickets.departureItems,ticketsHasErrored:e.searchPage.tickets.hasErrored,ticketsIsLoading:e.searchPage.tickets.isLoading,airports:e.searchPage.airports.items,airportsHaveErrored:e.searchPage.airports.hasErrored}},function(e){return{ticketsFetchData:function(t,a){return e(Ee(t))},airportsFetchData:function(t){return e(Xe(t))}}}))(_t);a(861);var vt=Object(u.b)(function(e){return{selectedFlightId:e.user.selectedFlight.id,returnSelectedFlightId:e.user.returnSelectedFlight.id}})(function(e){var t=e.flights,a=e.returnSelectedFlightId,n=e.selectedFlightId,s=e.setFlightInfo;return t.map(function(e,t){var c=e.id,o=e.date,i=e.startTime,l=e.endTime,u=e.fromCountry,m=e.toCountry,d=e.price,p=e.planeInfo,f=e.code;return r.a.createElement("div",{id:c,key:t,className:"flights-list-item".concat(c===a||c===n?" selectedFlight":"")},r.a.createElement("div",{className:"flights-list-item__info"},r.a.createElement("div",{className:"info-wrapper"},r.a.createElement("div",{className:"flight"},r.a.createElement("span",{className:"flight__time"},ve()(i).format("LT")),r.a.createElement("span",{className:"flight__country"},u)),r.a.createElement(Ae.d,{className:"fa-arrow"}),r.a.createElement("div",{className:"flight"},r.a.createElement("span",{className:"flight__time"},ve()(l).format("LT")),r.a.createElement("span",{className:"flight__country"},m)))),r.a.createElement("div",{className:"flights-list-item__price"},r.a.createElement("button",{type:"button",className:"price-link",onClick:function(){s({id:c,date:o,fromCountry:u,toCountry:m,startTime:i,endTime:l,price:d,planeInfo:p,code:f})}},"$ ",d)))})}),Nt=(a(862),function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(K.a)(this,Object(B.a)(t).call(this,e))).openSearchForm=function(){a.setState(function(e){return{isOpen:!e.isOpen}})},a.goToNextPage=function(){return a.props.twoWayRequest&&a.props.selectedFlight.id&&a.props.returnSelectedFlight.id?a.props.history.push("/passengers-list"):!a.props.twoWayRequest&&a.props.selectedFlight.id?a.props.history.push("/passengers-list"):a.props.enqueueSnackBar({message:"Choose flight",options:{variant:"warning"}})},a.getPassAmount=function(e,t,a){var n=e+t+a;return"".concat(n,n>1?" passengers":" passenger")},a.state={isOpen:!1},a}return Object(Y.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.tickets,n=e.returnTickets,s=e.twoWayRequest,c=e.request,o=c.from,i=c.to,l=c.adult,u=c.child,m=c.infant,d=c.departure,p=c.return,f=ve()(d).format("MMMM DD"),h=ve()(p).format("MMMM DD");return r.a.createElement("div",{className:"flights-container"},o?r.a.createElement("div",{className:"flights-list__bar"},r.a.createElement(J.a,{className:t.root,position:"fixed",color:"default"},r.a.createElement(X.a,null,r.a.createElement("div",{className:"text-wrapper"},r.a.createElement(ee.a,{variant:"h6",color:"inherit"},o," to ",i),r.a.createElement(ee.a,{color:"inherit"},f,h&&" - ",p&&h,", ",this.getPassAmount(l,u,m),r.a.createElement("button",{className:"change-button",type:"button",onClick:this.openSearchForm},"Change"))))),r.a.createElement(bt,{state:this.state.isOpen,onSearchClick:this.openSearchForm})):r.a.createElement("h1",{className:"flights-list__header"},"Please, try to search flights"),r.a.createElement(r.a.Fragment,null,a[0]&&r.a.createElement("h1",{className:"flights-list__header"},r.a.createElement("pre",null,o," - ",i,"   |   ",ve()(d).format("MMMM DD"))),r.a.createElement(Ke.a,{className:"flights-list",disablePadding:!0},r.a.createElement(vt,{classes:t,flights:a,setFlightInfo:this.props.setSelectedFlightInfo})),s&&n[0]&&r.a.createElement("h1",{className:"flights-list__header"},r.a.createElement("pre",null,i," - ",o,"   |   ",h)),r.a.createElement(Ke.a,{className:"flights-list",disablePadding:!0},r.a.createElement(vt,{classes:t,flights:this.props.returnTickets,setFlightInfo:this.props.setReturnSelectedFlightInfo}))),a[0]&&r.a.createElement("button",{type:"button",className:"button",onClick:this.goToNextPage},"Continue"))}}]),t}(r.a.Component)),St=Object(f.compose)(Me.a,Object(Q.withStyles)(Be),Object(u.b)(function(e){return{twoWayRequest:e.user.requestInfo.request.twoWayRequest,request:e.user.requestInfo.request,tickets:e.searchPage.tickets.departureItems,returnTickets:e.searchPage.tickets.returnItems,selectedFlight:e.user.selectedFlight,returnSelectedFlight:e.user.returnSelectedFlight}},function(e){return{setSelectedFlightInfo:function(t){return e(Ne(t))},setReturnSelectedFlightInfo:function(t){return e(Oe(t))},enqueueSnackBar:function(t){return e(ie(t))}}}))(Nt),yt=function(e){return{textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,backgroundColor:e.palette.common.white,width:200},dense:{marginTop:19},menu:{width:200},button:{margin:e.spacing.unit,marginTop:20}}},Ot=function(e){var t={};return e.email||(t.email="Required"),e.password||(t.password="Required"),t},Tt=(a(863),a(333),function(e){function t(){var e,a;Object(M.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(K.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).componentDidUpdate=function(){return a.props.loggedInUser&&a.props.history.goBack()},a.componentDidMount=function(){return a.props.loggedInUser&&a.props.history.goBack()},a.handleChange=function(e){return function(t){a.setState(Object(Ze.a)({},e,t.target.value))}},a.onSubmit=function(e){a.props.authoriseUser(e)},a}return Object(Y.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(Je.b,{onSubmit:this.onSubmit,validate:Ot,render:function(t){var a=t.handleSubmit;return r.a.createElement("form",{className:"login-form",onSubmit:a},r.a.createElement("div",{className:"login-form__container"},r.a.createElement(Ae.j,{className:"login-form__icon"}),r.a.createElement("h1",{className:"login-form__header"},"Login"),r.a.createElement(Je.a,{name:"email",component:Et,className:e.textField,type:"email",label:"Email",margin:"dense",variant:"outlined"}),r.a.createElement(Je.a,{name:"password",component:Et,className:e.textField,type:"password",label:"Password",margin:"dense",variant:"outlined"}),r.a.createElement("button",{className:"button",type:"submit"},"Login"),r.a.createElement(V.a,{to:"/register",className:"login-form__register-link"},"Registration")))}})}}]),t}(r.a.Component)),It=Object(f.compose)(Pe.a,Object(Q.withStyles)(yt),Object(u.b)(function(e){return{loggedInUser:e.user.requestInfo.loggedInUser}},function(e){return{authoriseUser:function(t){return e(de(t))}}}))(Object(d.withSnackbar)(Tt)),Rt=function(e){return{textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200},dense:{marginTop:19},menu:{width:200}}},kt=function(e){var t={};return e.firstName||(t.firstName="Required"),e.lastName||(t.lastName="Required"),e.email||(t.email="Required"),e.password?e.password.length<8&&(t.password="Less than 8 signs"):t.password="Required",t},Ft=(a(864),function(e){function t(){var e,a;Object(M.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(K.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).componentDidUpdate=function(){return a.props.loggedInUser&&a.props.history.goBack()},a.handleChange=function(e){return function(t){a.setState(Object(Ze.a)({},e,t.target.value))}},a.onSubmit=function(e){return a.props.authoriseUser(e)},a}return Object(Y.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(Je.b,{onSubmit:this.onSubmit,validate:kt,render:function(t){var a=t.handleSubmit;return r.a.createElement("form",{className:"register-form",onSubmit:a},r.a.createElement("div",{className:"register-form__container"},r.a.createElement(Ae.l,{className:"register-form__icon"}),r.a.createElement("h1",{className:"register-form__header"},"Register"),r.a.createElement(Je.a,{name:"firstName",component:Et,className:e.textField,type:"text",label:"First Name",margin:"dense",variant:"outlined"}),r.a.createElement(Je.a,{name:"lastName",component:Et,className:e.textField,type:"text",label:"Last Name",margin:"dense",variant:"outlined"}),r.a.createElement(Je.a,{name:"email",component:Et,className:e.textField,type:"email",label:"Email",margin:"dense",variant:"outlined"}),r.a.createElement(Je.a,{name:"password",component:Et,className:e.textField,type:"password",label:"Password",margin:"dense",variant:"outlined"}),r.a.createElement("button",{className:"button",type:"submit"},"Register")))}})}}]),t}(r.a.Component)),jt=Object(f.compose)(Pe.a,Object(Q.withStyles)(Rt),Object(u.b)(function(e){return{loggedInUser:e.user.requestInfo.loggedInUser}},function(e){return{authoriseUser:function(t){return e(de(t))}}}))(Ft),Ct=a(9),wt=a.n(Ct),Dt=a(56),Pt=a.n(Dt),At=function(e){var t,a,n;return{textField:(t={marginBottom:e.spacing.unit,backgroundColor:e.palette.common.white,width:240},Object(Ze.a)(t,e.breakpoints.up("sm"),{width:210}),Object(Ze.a)(t,e.breakpoints.up("md"),{width:240}),Object(Ze.a)(t,e.breakpoints.up("lg"),{width:270}),t),hiddenTextField:{display:"none"},selectField:(a={backgroundColor:e.palette.common.white,marginBottom:e.spacing.unit,width:240},Object(Ze.a)(a,e.breakpoints.up("sm"),{width:210}),Object(Ze.a)(a,e.breakpoints.up("md"),{width:240}),Object(Ze.a)(a,e.breakpoints.up("lg"),{width:270}),a),passengers:(n={backgroundColor:e.palette.common.white,width:80},Object(Ze.a)(n,e.breakpoints.up("sm"),{width:70}),Object(Ze.a)(n,e.breakpoints.up("md"),{width:80}),Object(Ze.a)(n,e.breakpoints.up("lg"),{width:90}),n),selectEmpty:{marginTop:2*e.spacing.unit},button:{margin:e.spacing.unit,marginTop:20}}},Ut=(a(865),function(e){function t(){var e,a;Object(M.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(K.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).state={oneWayType:!0},a.componentDidUpdate=function(){return a.props.userRequest.twoWayRequest?a.props.tickets.length&&a.props.returnTickets.length&&a.props.history.push("/flights-list"):a.props.tickets.length&&a.props.history.push("/flights-list")},a.onSubmit=function(e){return a.props.ticketsFetchData(e)},a.setWayType=function(){return a.setState(function(e){return{oneWayType:!e.oneWayType}})},a}return Object(Y.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){return this.props.airports.length||this.props.airportsFetchData("http://localhost:3001/airports")}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:"search-form-container"},r.a.createElement(Je.b,{onSubmit:this.onSubmit,validate:tt,render:function(a){var n=a.handleSubmit;return r.a.createElement("form",{className:"search-form",onSubmit:n},r.a.createElement(Je.a,{name:"from",label:"From",className:t.selectField,component:ft,items:e.props.airports}),r.a.createElement(Je.a,{name:"to",label:"To",className:t.selectField,component:ft,items:e.props.airports}),r.a.createElement(ze.b,{utils:$e.a},r.a.createElement(Je.a,{name:"departure",label:"Departure",className:t.textField,component:nt,variant:"outlined"})),r.a.createElement(Je.a,{name:"wayType",className:"way-type",component:"input",type:"checkbox",variant:"outlined",value:"2",onClick:e.setWayType}),r.a.createElement(ze.b,{utils:$e.a},r.a.createElement(Je.a,{name:"return",label:"Return",className:wt()(t.textField,Object(Ze.a)({},t.hiddenTextField,e.state.oneWayType)),component:nt,variant:"outlined"})),r.a.createElement("div",{className:"passengers-counters"},r.a.createElement(Je.a,{name:"adult",label:"Passengers",className:t.textField,component:Et,variant:"outlined"})),r.a.createElement(Pt.a,{variant:"contained",color:"primary",className:t.button,type:"submit"},"Search"))}}))}}]),t}(r.a.Component)),Lt=Object(f.compose)(Me.a,Object(Q.withStyles)(At),Object(u.b)(function(e){return{userRequest:e.user.requestInfo.request,tickets:e.searchPage.tickets.departureItems,returnTickets:e.searchPage.tickets.returnItems,ticketsHasErrored:e.searchPage.tickets.hasErrored,ticketsIsLoading:e.searchPage.tickets.isLoading,airports:e.searchPage.airports.items,airportsHaveErrored:e.searchPage.airports.hasErrored}},function(e){return{ticketsFetchData:function(t){return e(Ee(t))},airportsFetchData:function(t){return e(Xe(t))}}}))(Ut),Gt=a(350),xt=a.n(Gt),qt=(a(866),function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(K.a)(this,Object(B.a)(t).call(this,e))).addPassenger=function(){},a.removePassenger=function(){},a.state={adult:0,child:0,infant:0},a}return Object(Y.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"counters"},r.a.createElement("div",{className:"counters__container"},r.a.createElement("div",{className:"counters__icon"},r.a.createElement(xt.a,null)),["adult","child","infant"].map(function(t){return r.a.createElement("div",{className:"counter__wrapper",key:Math.random()},r.a.createElement("button",{type:"button",className:"counter__button counter__button_minus"},"-"),r.a.createElement("div",{className:"counter__info"},e.state[t]," ",t),r.a.createElement("button",{type:"button",className:"counter__button counter__button_plus"},"+"))}),r.a.createElement(Pt.a,{variant:"contained",color:"primary",type:"submit"},"OK")))}}]),t}(r.a.Component)),Ht=a(351),Mt=a(352);a(867);function Wt(){return function(e){fetch("http://localhost:3001/luggage-types").then(function(e){if(!e.ok)throw Error("Info is not found");return e}).then(function(e){return e.json()}).then(function(t){return e(function(e){return{type:P.GET_LUGGAGE_TYPES,luggageTypes:e}}(t))}).catch(function(){return e((t=!0,{type:P.LUGGAGE_HAS_ERRORED,bool:t}));var t})}}a(868);var Kt=function(e){function t(){var e,a;Object(M.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(K.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){return a.props.fetchLuggageTypes()},a}return Object(Y.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"luggage-list"},this.props.luggageTypes.map(function(t,a){var n=t.kg,s=t.price;return r.a.createElement("div",{key:a,className:"luggage-list__checkbox"},r.a.createElement("div",{className:"image".concat(n," image").concat(n,"_active")}),r.a.createElement("label",{htmlFor:s,key:Math.random(),className:"luggage-list__label luggage-list__label_".concat(n)},r.a.createElement(Je.a,{id:s,name:"luggage".concat(e.props.index),component:"input",type:"radio",value:"".concat(s)})," ",r.a.createElement("div",{className:"luggage-list__kg"},"".concat(0===n?"no baggage":"kg ".concat(n))),r.a.createElement("div",{className:"luggage-list__price"},"".concat(0===s?"free":"$ ".concat(s)))))}))}}]),t}(r.a.Component),Bt=Object(u.b)(function(e){return{luggageTypes:e.data.luggage.luggageTypes}},function(e){return{fetchLuggageTypes:function(){return e(Wt())}}})(Kt);a(869);function Yt(e){var t=e.index,a=function(e){return e&&e.length>0?void 0:"Required"};return r.a.createElement("div",{className:"expandable-panel-details"},r.a.createElement("div",{className:"expandable-panel-details__names"},r.a.createElement(Je.a,{name:"firstname".concat(t),validate:a,label:"First Name",component:Et,type:"text",margin:"dense"}),r.a.createElement(Je.a,{name:"lastname".concat(t),validate:a,label:"Last Name",component:Et,type:"text",margin:"dense"})),r.a.createElement(Bt,{index:t}))}a(870);function Vt(e){var t=e.index;return r.a.createElement("div",{className:"expandable-panel__header"},r.a.createElement(Ae.i,{className:"expandable-panel__header-icon"}),r.a.createElement("span",{className:"expandable-panel__header-text"},t+1," passenger"))}var Qt=a(353),$t=a.n(Qt),Jt=a(85),zt=a.n(Jt),Xt=a(86),Zt=a.n(Xt);a(871);var ea=Object(f.compose)(Pe.a,Object(Q.withStyles)(function(e){return{root:{backgroundColor:"transparent",padding:"12px",paddingBottom:"30px"}}}))(function(e){var t=e.classes,a=e.activeStep;return r.a.createElement("div",null,r.a.createElement($t.a,{className:t.root,activeStep:a,alternativeLabel:!0},r.a.createElement(zt.a,null,r.a.createElement(Zt.a,null,"Passengers")),r.a.createElement(zt.a,null,r.a.createElement(Zt.a,null,"Seats")),r.a.createElement(zt.a,null,r.a.createElement(Zt.a,null,"Order")),r.a.createElement(zt.a,null,r.a.createElement(Zt.a,null,"Payment")),r.a.createElement(zt.a,null,r.a.createElement(Zt.a,null,"Success"))))}),ta=function(e){function t(){var e,a;Object(M.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(K.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){for(var t=Object.keys(e).sort().map(function(t){return e[t]}),n=[],r=t.length/3,s=0;s<r;s++){var c={firstname:t[s],lastname:t[s+r],luggagePrice:t[s+2*r]};n.push(c)}var o=a.props.history;return n.map(function(e){return a.props.luggageTypes.forEach(function(t){t.price===+e.luggagePrice&&(e.luggagePrice=t.price,e.luggageKg=t.kg)})}),a.props.setPassengersInfo(n),a.props.setReturnFlightPassengersInfo(n),o.push("/passengers-seats")},a}return Object(Y.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props.userRequest,t=e.adult,a=e.child,n=e.infant,s=new Array(t+a+n).fill(1);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ea,{activeStep:0}),r.a.createElement(Je.b,{onSubmit:this.onSubmit,mutators:Object(v.a)({},Ht.a),render:function(e,t,a){var n=e.handleSubmit;return r.a.createElement("form",{onSubmit:n,className:"passengers-list-form"},r.a.createElement(Mt.a,{name:"information"},function(){return s.map(function(e,t){return r.a.createElement("div",{className:"expandable-panel",key:t},r.a.createElement(Vt,{index:t}),r.a.createElement(Yt,{index:t}))})}),r.a.createElement("button",{type:"submit",className:"button",disabled:a||t},"Confirm"))}}))}}]),t}(n.Component),aa=Object(f.compose)(Me.a,Object(u.b)(function(e){return{userRequest:e.user.requestInfo.request,luggageTypes:e.data.luggage.luggageTypes}},function(e){return{setPassengersInfo:function(t){return e(Se(t))},setReturnFlightPassengersInfo:function(t){return e(Te(t))},resetTicketsInfo:function(){return e(_e())}}}))(ta);a(881);var na=function(e){var t=e.flight,a=e.passengersInfo,n=e.setSelectedPassenger,s=e.selectedPassenger,c=function(e){return n(+e.target.id)};return r.a.createElement("div",{className:"passenger-seats-container"},r.a.createElement("table",{className:"passengers-seats"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"th",colSpan:"2"},t.fromCountry," - ",t.toCountry)),a.map(function(e,t){var n=e.firstname,o=e.lastname;return r.a.createElement("tr",{key:t,className:"passengers-seats__passenger ".concat(s===t?"selected":"")},r.a.createElement("td",{className:"passengers-seats__info td"},n," ",o),r.a.createElement("td",{id:t,className:"passengers-seats__seat td",onClick:c},a[t].selectedSeat||"seat"))}))))};a(882);var ra=function(e){var t=e.rows,a=e.location,n=e.selectedPassenger,s=e.passengersInfo,c=e.setInfo,o=e.soldSeats,i=new Array(t).fill(1),l=function(e){var t=e.target.id,a=s.map(function(e,a){return a===n?Object(v.a)({},e,{selectedSeat:t}):e});c(a)},u=s.map(function(e){return e.selectedSeat});return i.map(function(e,t){return r.a.createElement("div",{key:t,className:"row seats"},a.map(function(e,n){var s=t+1+a[n],c=o.some(function(e){return e===s}),i=u.some(function(e){return e===s});return e?r.a.createElement("div",{id:s,key:t+n,className:"seat".concat(c?" disabled":"").concat(i?" selectedSeat":""),onClick:c||i?null:l},r.a.createElement("span",{id:s,className:"seat-point"},s),c?null:r.a.createElement("span",{className:"tooltiptext"},"$9")):r.a.createElement("div",{key:Math.random(),className:"empty"},t+1)}))})};function sa(e){var t=e.signs;return r.a.createElement("div",{className:"row"},t.map(function(e){return e?r.a.createElement("div",{key:Math.random(),className:"sign seat"},r.a.createElement("span",{className:"sign seat"},e)):r.a.createElement("div",{key:Math.random(),className:"empty"})}))}a(883);var ca=function(e){var t=e.setInfo,a=e.location,n=e.rows,s=e.passengersInfo,c=e.selectedPassenger,o=e.soldSeats;return r.a.createElement("div",{className:"plane"},r.a.createElement("div",{className:"plane__cockpit"}),r.a.createElement("div",{className:"plane__exit plane__exit_front"}),r.a.createElement(sa,{signs:a}),r.a.createElement(ra,{setInfo:t,rows:n,location:a,passengersInfo:s,selectedPassenger:c,soldSeats:o}),r.a.createElement("div",{className:"plane__exit plane__exit_back"}),r.a.createElement("div",{className:"plane__cockpit_invert"}))},oa=(a(884),function(e){function t(){var e,a;Object(M.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(K.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).state={currentFlightId:a.props.selectedFlight.id},a.goToNextPage=function(){return a.state.currentFlightId!==a.props.selectedFlight.id?!a.props.returnSelectedFlight.passengersInfo.some(function(e){return void 0===e.selectedSeat})&&a.props.history.push("/order-details"):a.props.selectedFlight.passengersInfo.some(function(e){return void 0===e.selectedSeat})?void 0:a.props.twoWayRequest?a.setState({currentFlightId:a.props.returnSelectedFlight.id}):a.props.history.push("/order-details")},a}return Object(Y.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selectedFlight,a=e.returnSelectedFlight,n=e.setSelectedPassenger,s=e.setPassengersInfo,c=e.setReturnFlightSelectedPassenger,o=e.setReturnFlightPassengersInfo;return console.log(t),r.a.createElement(r.a.Fragment,null,r.a.createElement(ea,{activeStep:1}),r.a.createElement("div",{className:"seats-choice-wrapper"},r.a.createElement("div",{className:"seats-choice-container"},r.a.createElement("div",{className:"flight-seats".concat(this.state.currentFlightId===t.id?"":" closed-block")},r.a.createElement(na,{flight:t,passengersInfo:t.passengersInfo,setSelectedPassenger:n,selectedPassenger:t.selectedPassenger}),r.a.createElement(ca,{setInfo:s,rows:t.planeInfo.rowsNumber,location:t.planeInfo.seatsInRow,passengersInfo:t.passengersInfo,selectedPassenger:t.selectedPassenger,soldSeats:t.soldSeats})),a.id&&r.a.createElement("div",{className:"flight-seats".concat(this.state.currentFlightId===a.id?"":" closed-block")},r.a.createElement(na,{flight:a,passengersInfo:a.passengersInfo,setSelectedPassenger:c,selectedPassenger:a.selectedPassenger}),r.a.createElement(ca,{setInfo:o,rows:a.planeInfo.rowsNumber,location:a.planeInfo.seatsInRow,passengersInfo:a.passengersInfo,selectedPassenger:a.selectedPassenger,soldSeats:a.soldSeats}))),r.a.createElement("button",{type:"button",className:"button",onClick:this.goToNextPage},"Continue")))}}]),t}(r.a.Component)),ia=Object(f.compose)(Pe.a,Object(u.b)(function(e){return{twoWayRequest:e.user.requestInfo.request.twoWayRequest,selectedFlight:e.user.selectedFlight,returnSelectedFlight:e.user.returnSelectedFlight}},function(e){return{setSelectedPassenger:function(t){return e(function(e){return{type:R.SELECTED_PASSENGER,id:e}}(t))},setPassengersInfo:function(t){return e(Se(t))},setReturnFlightSelectedPassenger:function(t){return e(function(e){return{type:R.RETURN_FLIGHT_SELECTED_PASSENGER,id:e}}(t))},setReturnFlightPassengersInfo:function(t){return e(Te(t))},enqueueSnackBar:function(t){return e(ie(t))}}}))(oa),la=S()({SET_PAYMENT_DATA:null,GET_PAYMENT_DATA_ERROR:null});function ua(e){return{type:la.GET_PAYMENT_DATA_ERROR,payload:e}}function ma(e){return function(t){oe.a.post("http://localhost:3001/pay",e).then(function(e){if(200!==e.status)throw Error(e.statusText);return e.data}).then(function(e){var a;t((a=e,{type:la.SET_PAYMENT_DATA,payload:a})),t(ua(!1))}).catch(function(){return t(ua(!0))})}}a(885);var da=Object(f.compose)(Me.a,Object(u.b)(function(e){return{requestInfo:e.user.requestInfo.request,selectedFlight:e.user.selectedFlight,returnSelectedFlight:e.user.returnSelectedFlight}},function(e){return{fetchPaymentD:function(t){return e(ma(t))}}}))(function(e){var t=e.requestInfo,a=e.selectedFlight,n=e.returnSelectedFlight,s=(e.history,e.fetchPaymentD),c=t.twoWayRequest?[a,n]:[a],o=t.adult+t.child+t.infant;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ea,{activeStep:2}),r.a.createElement("section",{className:"order-details"},r.a.createElement("div",{className:"order-details-wrapper"},c.map(function(e,t){var a=e.date,n=e.fromCountry,s=e.toCountry,i=e.startTime,l=e.endTime,u=e.price,m=e.passengersInfo;return r.a.createElement("div",{key:t,className:1===c.length?"one-ticket":"two-tickets"},r.a.createElement("section",{className:"order-details__flight"},r.a.createElement("div",{className:"order-details__header"},r.a.createElement(Ae.c,{className:"order-details__icon"}),r.a.createElement("span",{className:"order-details__text"},"Flight")),r.a.createElement("div",{className:"flight-info"},r.a.createElement("span",{className:"flight-info__date"},ve()(a).format("MMM Do")),r.a.createElement("div",{className:"flight-info__wrapper"},r.a.createElement("span",{className:"flight-info__direction"},n," - ",s),r.a.createElement("span",{className:"flight-info__time"},ve()(i).format("LT")," - ",ve()(l).format("LT")))),r.a.createElement("div",{className:"about-price"},r.a.createElement("span",{className:"about-price__text"},o," x Flight ticket"),r.a.createElement("span",{className:"about-price__amount"},"$ ",u*o))),r.a.createElement("section",{className:"order-details__passengers"},r.a.createElement("div",{className:"order-details__header"},r.a.createElement(Ae.c,{className:"order-details__icon"}),r.a.createElement("span",{className:"order-details__text"},"Passengers")),m.map(function(e,t){return r.a.createElement("div",{className:"passengers-info",key:t},r.a.createElement("div",{className:"passengers-info__about"},r.a.createElement(Ae.g,{className:"passengers-info__icon"}),r.a.createElement("span",{className:"passengers-info__name"},e.firstname," ",e.lastname)),r.a.createElement("div",{className:"about-price"},r.a.createElement("span",{className:"about-price__text"},"Luggage ",0===e.luggageKg?"":" - ".concat(e.luggageKg," kg")),r.a.createElement("span",{className:"about-price__amount"},"$ ",e.luggagePrice)),r.a.createElement("div",{className:"about-price"},r.a.createElement("span",{className:"about-price__text"},"Seat - ",e.selectedSeat),r.a.createElement("span",{className:"about-price__amount"},"included")))})),r.a.createElement("section",{className:"order-details__total-price"},r.a.createElement("span",{className:"total-price__text"},"Total"),r.a.createElement("span",{className:"total-price__amount"},"$ ",u*o+function(e){return e.reduce(function(e,t){return e+t.luggagePrice},0)}(m))))})),r.a.createElement("button",{type:"button",className:"button",onClick:function(){s({intent:"sale",payer:{payment_method:"paypal"},redirect_urls:{return_url:"http://return.url",cancel_url:"http://cancel.url"},transactions:[{item_list:{items:[{name:"item",sku:"item",price:"1.00",currency:"USD",quantity:1}]},amount:{currency:"USD",total:"1.00"},description:"This is the payment description."}]})}},"Confirm")))}),pa=function(e){var t={};return e.number||(t.number="Please add the card number"),e.name||(t.name="Please ass the cardholder name"),e.month||(t.month="Required"),e.year||(t.year="Required"),e.code||(t.code="Please add CVC2/CVV number"),t};a(886);var fa=Object(f.compose)(Me.a,Object(u.b)(function(e){return{userRequest:e.user.requestInfo.request,selectedFlight:e.user.selectedFlight,returnSelectedFlight:e.user.returnSelectedFlight}},function(e){return{payForOrder:function(t){return e(function(e){return function(t){return e.forEach(function(e){return oe.a.post("http://localhost:3001/order",e).then(function(e){if(200!==e.status)throw ue(!1),Error(e.statusText);return e.data}).then(function(){return t(ue(!0))}).catch(function(e){return console.log(e)})})}}(t))}}}))(function(e){var t=e.history,a=e.userRequest,n=e.payForOrder,s=e.selectedFlight,c=e.returnSelectedFlight,o=[{_id:1,name:1},{_id:2,name:2},{_id:3,name:3},{_id:4,name:4},{_id:5,name:5},{_id:6,name:6},{_id:7,name:7},{_id:8,name:8},{_id:9,name:9},{_id:10,name:10},{_id:11,name:11},{_id:12,name:12}],i=[{_id:19,name:19},{_id:20,name:20},{_id:21,name:21},{_id:22,name:22},{_id:23,name:23},{_id:24,name:24},{_id:25,name:25},{_id:26,name:26},{_id:27,name:27},{_id:28,name:28}],l=function(e){if(!e)return e;var t=e.replace(/[^\d]/g,"");return t.length<=3?t:t.length<=7?"".concat(t.slice(0,4)," ").concat(t.slice(4,8)):t.length<=11?"".concat(t.slice(0,4)," ").concat(t.slice(4,8)," ").concat(t.slice(8,12)):"".concat(t.slice(0,4)," ").concat(t.slice(4,8)," ").concat(t.slice(8,12)," ").concat(t.slice(12,16))},u=function(e){if(!e)return e;var t=e.replace(/[^\d]/g,"");return t.length<=3?t:"".concat(t.slice(0,3))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ea,{activeStep:3}),r.a.createElement("section",{className:"payment"},r.a.createElement("h1",{className:"payment__header"},"credit card"),r.a.createElement("section",{className:"payment__cards"},r.a.createElement("span",{className:"payment__text"},"Accepted cards:"),r.a.createElement(Ae.b,{className:"payment__cards_visa"}),r.a.createElement(Ae.a,{className:"payment__cards_mastercard"})),r.a.createElement(Je.b,{onSubmit:function(){localStorage.setItem("payment",JSON.stringify(a));var e=a.adult+a.child+a.infant,r=(a.twoWayRequest?[s,c]:[s]).map(function(t){return{user:localStorage.getItem("id"),fromCountry:t.fromCountry,toCountry:t.toCountry,departureDate:t.date,startTime:t.startTime,endTime:t.endTime,passengersAmount:e,selectedFlight:t.id,passengersInfo:t.passengersInfo}});n(r),t.push("/payment-success")},validate:pa,render:function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",{className:"payment-card"},r.a.createElement("div",{className:"payment-card__field-wrapper"},r.a.createElement(Ae.f,{className:"payment-card__icon"}),r.a.createElement(Je.a,{name:"number",label:"Card number",type:"text",parse:l,className:"payment-card__field",component:Et,variant:"outlined"})),r.a.createElement("div",{className:"payment-card__field-wrapper"},r.a.createElement(Ae.i,{className:"payment-card__icon"}),r.a.createElement(Je.a,{name:"name",label:"Name on card",className:"payment-card__field",component:Et,variant:"outlined"})),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"payment-card__field-wrapper"},r.a.createElement(Ae.e,{className:"payment-card__icon"}),r.a.createElement(Je.a,{id:"month",name:"month",label:"mm",className:"payment-card__date payment-card__date_month",component:ft,items:o}),r.a.createElement(Je.a,{id:"year",name:"year",label:"yy",className:"payment-card__date",component:ft,items:i})),r.a.createElement("div",{className:"payment-card__field-wrapper"},r.a.createElement(Ae.h,{className:"payment-card__lock-icon"}),r.a.createElement(Je.a,{name:"code",label:"CVC/CVV",type:"password",parse:u,className:"payment-card__field payment-card__field_code",component:Et,variant:"outlined"})))),r.a.createElement("button",{type:"submit",className:"button payment__button"},"Pay now"))}})))});a(887);var ha=Object(f.compose)(Me.a,Object(u.b)(function(e){return{twoWayRequest:e.user.requestInfo.request.twoWayRequest,selectedFlight:e.user.selectedFlight,returnSelectedFlight:e.user.returnSelectedFlight}},function(e){return{resetTicketsInfo:function(){return e(_e())},resetSelectedFlightInfo:function(){return e(ye())},resetReturnSelectedFlightInfo:function(){return e(Ie())},resetOrdersInfo:function(){return e(Fe())},resetUserInfo:function(){return e(pe())}}}))(function(e){var t=e.history,a=e.selectedFlight,n=e.returnSelectedFlight,s=e.twoWayRequest,c=e.resetTicketsInfo,o=e.resetSelectedFlightInfo,i=e.resetReturnSelectedFlightInfo,l=e.resetOrdersInfo,u=e.resetUserInfo,m=s?[a,n]:[a];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"stepper-wrapper"},r.a.createElement(ea,{activeStep:5})),r.a.createElement("section",{className:"tickets"},r.a.createElement("div",{className:"tickets-wrapper ".concat(s?"":"one-way")},m.map(function(e){var t=e.id,a=e.date,n=e.fromCountry,s=e.toCountry,c=e.startTime,o=e.endTime,i=e.passengersInfo;return r.a.createElement("section",{key:t,className:"ticket"},r.a.createElement("div",{className:"ticket__header"},"Flight ticket"),r.a.createElement("div",{className:"ticket__departure-info"},r.a.createElement("h1",{className:"ticket__destination"},n," - ",s),r.a.createElement("span",{className:"ticket__time"},ve()(c).format("LT")," - ",ve()(o).format("LT")," , ",ve()(a).format("MMM Do, YYYY"))),r.a.createElement("div",{className:"passengers-info"},r.a.createElement("div",{className:"passengers-info__header"},r.a.createElement("span",null,"passenger name"),r.a.createElement("span",null,"seat")),i.map(function(e){var t=e.firstname,a=e.lastname,n=e.selectedSeat;return r.a.createElement("div",{key:n,className:"passengers-info__details"},r.a.createElement("span",{className:"passengers-info__name"},t," ",a),r.a.createElement("span",{className:"passengers-info__seat"},n))})),r.a.createElement("div",{className:"ticket__footer"},r.a.createElement("div",{className:"ticket__barcode"})))})),r.a.createElement("div",{className:"buttons-wrapper"},r.a.createElement("button",{type:"button",className:"button",onClick:function(){c(),o(),i(),l(),u(),t.push("/search")}},"to start"),r.a.createElement("button",{type:"button",className:"button",onClick:function(){return window.print()}},"PRINT TICKET"))))}),ga=(a(888),function(e){function t(){var e,a;Object(M.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(K.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).state={isOpened:!1},a.toggleDetails=function(){return a.setState(function(e){return{isOpened:!e.isOpened}})},a}return Object(Y.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props.order;return r.a.createElement("li",{className:"list-item"},r.a.createElement("div",{className:"list-item__header",onClick:this.toggleDetails},r.a.createElement("div",{className:"list-item__header-wrapper"},r.a.createElement("span",{className:"list-item__destination"},e.fromCountry," - ",e.toCountry),r.a.createElement("div",{className:"list-item__departure"},r.a.createElement("span",{className:"list-item__departure_date"},ve()(e.departureDate).format("LL")),r.a.createElement("span",{className:"list-item__departure_time"},ve()(e.startTime).format("LT")," - ",ve()(e.endTime).format("LT"))))),this.state.isOpened&&r.a.createElement("div",{className:"list-item__details"},r.a.createElement("table",{className:"list-item__table"},r.a.createElement("tbody",null,r.a.createElement("tr",{className:"list-item__table-row list-item__table-row_head"},r.a.createElement("th",{className:"list-item__table-th"},"#"),r.a.createElement("th",{className:"list-item__table-th"},"passenger name"),r.a.createElement("th",{className:"list-item__table-th"},"luggage"),r.a.createElement("th",{className:"list-item__table-th"},"seat")),e.passengersInfo.map(function(e,t){var a=e.firstname,n=e.lastname,s=e.luggageKg,c=e.selectedSeat;return r.a.createElement("tr",{className:"list-item__table-row",key:s+t},r.a.createElement("td",{className:"list-item__table-td"},t+1),r.a.createElement("td",{className:"list-item__table-td"},a," ",n),r.a.createElement("td",{className:"list-item__table-td"},s," kg"),r.a.createElement("td",{className:"list-item__table-td"},c))})))))}}]),t}(r.a.Component)),Ea=(a(889),function(e){function t(){var e,a;Object(M.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(K.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){return a.props.fetchUserOrdersData(new Date,"future")},a.getPastOrders=function(){return a.props.fetchUserOrdersData(new Date,"past")},a.getFutureOrders=function(){return a.props.fetchUserOrdersData(new Date,"future")},a}return Object(Y.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"orders-history"},r.a.createElement("div",{className:"orders-history__filter-buttons"},r.a.createElement("button",{type:"button",className:"button orders-history__filter-button",onClick:this.getFutureOrders},"Future"),r.a.createElement("button",{type:"button",className:"button orders-history__filter-button",onClick:this.getPastOrders},"Past")),r.a.createElement("ul",{className:"orders-history__list"},this.props.userOrders.map(function(e,t){return r.a.createElement(ga,{order:e,key:t})})))}}]),t}(r.a.Component)),_a=Object(u.b)(function(e){return{userOrders:e.user.ordersInfo.orders}},function(e){return{fetchUserOrdersData:function(t,a){return e(ke(t,a))}}})(Ea),ba={shouldRoute:function(){var e=localStorage.getItem("token");return e?oe.a.post(le.checkAuthentication,null,{headers:{Authorization:e}}).then(function(e){return e.data?Promise.resolve(!0):Promise.resolve(!1)}).catch(function(e){return localStorage.setItem("error",JSON.stringify(e))}):Promise.resolve(!1)}};a(890);function va(){return r.a.createElement("div",{className:"not-found-page__background"},r.a.createElement("div",{className:"not-found-page"},r.a.createElement("h1",{className:"not-found-page__main-header"},"Page not found"),r.a.createElement("h3",{className:"not-found-page___secondary-header"},"We're sorry, we couldn't find the page you requested."),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"not-found-page__proposal"},"You can try to find something",r.a.createElement(V.a,{to:"/search",className:"not-found-page__proposal-link"},"here"))))}var Na=function(e){function t(){var e,a;Object(M.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(K.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).displayed=[],a.storeDisplayed=function(e){a.displayed=[].concat(Object(L.a)(a.displayed),[e])},a}return Object(Y.a)(t,e),Object(W.a)(t,[{key:"shouldComponentUpdate",value:function(e){for(var t=e.notifications,a=void 0===t?[]:t,n=this.props.notifications,r=!1,s=function(e){if(r)return"continue";r=r||!n.filter(function(t){var n=t.key;return a[e].key===n}).length},c=0;c<a.length;c+=1)s(c);return r}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.notifications;(void 0===t?[]:t).forEach(function(t){e.displayed.includes(t.key)||(e.props.enqueueSnackbar(t.message,t.options),e.storeDisplayed(t.key),e.props.removeSB(t.key))})}},{key:"render",value:function(){return null}}]),t}(r.a.Component),Sa=Object(u.b)(function(e){return{notifications:e.notifications.notifications}},function(e){return{removeSB:function(t){return e({type:"REMOVE_SNACKBAR",key:t})}}})(Object(d.withSnackbar)(Na)),ya=function(){var e=Object(f.createStore)(H,Object(_.composeWithDevTools)(Object(f.applyMiddleware)(b.a)));return{store:e,persistor:Object(h.b)(e)}}(),Oa=ya.store,Ta=ya.persistor;c.a.render(r.a.createElement(u.a,{store:Oa},r.a.createElement(p.a,{loading:null,persistor:Ta},r.a.createElement(d.SnackbarProvider,null,r.a.createElement(function(){return r.a.createElement("div",null,r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement(He,null),r.a.createElement(Sa,null),r.a.createElement(i.a,null,r.a.createElement(l.a,{path:"/search",component:Lt}),r.a.createElement(l.a,{path:"/passengers-counters",component:qt}),r.a.createElement(l.a,{path:"/flights-list",component:St}),r.a.createElement(m.SecureRoute,{path:"/passengers-list",component:aa,routeGuard:ba,redirectToPathWhenFail:"/login"}),r.a.createElement(m.SecureRoute,{path:"/passengers-seats",component:ia,routeGuard:ba,redirectToPathWhenFail:"/login"}),r.a.createElement(m.SecureRoute,{path:"/order-details",component:da,routeGuard:ba,redirectToPathWhenFail:"/login"}),r.a.createElement(m.SecureRoute,{path:"/payment",component:fa,routeGuard:ba,redirectToPathWhenFail:"/login"}),r.a.createElement(m.SecureRoute,{path:"/payment-success",component:ha,routeGuard:ba,redirectToPathWhenFail:"/login"}),r.a.createElement(m.SecureRoute,{path:"/orders-history",component:_a,routeGuard:ba,redirectToPathWhenFail:"/login"}),r.a.createElement(l.a,{path:"/login",component:It}),r.a.createElement(l.a,{path:"/register",component:jt}),r.a.createElement(l.a,{component:va})))))},null)))),document.getElementById("root"))}},[[354,1,2]]]);
//# sourceMappingURL=main.f3d861d5.chunk.js.map